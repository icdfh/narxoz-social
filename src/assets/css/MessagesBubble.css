/* ===================================================================
   Message Bubble & Rows
   =================================================================== */

/* Строка сообщения */
.msg-row {
  display: flex;
  flex-direction: column;
  max-width: 100%;
  margin: 1px 20px; /* очень плотное расположение */
}
.msg-row.own   { align-self: flex-end; }
.msg-row.other { align-self: flex-start; }

/* Пузырёк сообщения */
.msg-bubble {
  position: relative;
  padding: 14px 20px;         /* больше пространства внутри */
  font-size: 1rem;
  line-height: 1.4;
  border-radius: var(--radius-bubble);
  box-shadow: 0 1px 2px rgba(0,0,0,0.05);
}

.msg-bubble.own {
  background: #FFFFFF;        /* чистый белый фон */
  max-width: 100%;             /* почти вся ширина */
  border-bottom-right-radius: 4px;
  align-self: flex-end;       /* прижать вправо */
  margin-left: auto;          /* убрать отступ слева */
}
.msg-bubble.other {
  background: var(--bg-incoming);
  max-width: 100%;             /* поменьше ширина */
  border-bottom-left-radius: 4px;
  background: #FFFFFF; 
}

/* Акцентная полоска */
.msg-bubble::before {
  content: "";
  position: absolute;
  top: 0; left: 0;
  width: 6px; height: 100%;
  background: var(--accent);
  border-top-left-radius: var(--radius-bubble);
  border-bottom-left-radius: var(--radius-bubble);
}
.msg-row.own .msg-bubble::before {
  left: auto; right: 0;
  border-top-right-radius: var(--radius-bubble);
  border-bottom-right-radius: var(--radius-bubble);
}

/* Отображение имени/аватара отправителя */
.sender-info {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-bottom: 1px; /* почти нет отступа */
  font-size: 20px;
  color: white;
}
.sender-avatar {
  width: 35px;
  height: 35px;
  border-radius: 50%;
  object-fit: cover;
}
.sender-nickname {
  font-size: 16px;
  color: white;
}

/* Текст внутри пузыря */
.msg-text {
  margin: 0;
  color: var(--text-primary);
  font-size: 16px;
}

/* Время внутри пузыря */
.message-time {
 color: var(--text-secondary);
 font-size: 14px;
 margin-top: 4px;
 display: flex;
 justify-content: flex-end;
}

/* Превью изображений */
.file-img-wrapper {
  display: block;
  margin: 4px 0;
}

.file-img-preview {
  max-width: 200px;
  max-height: 200px;
  border-radius: 4px;
  object-fit: cover;
}

/* Карточка документа */
.file-card {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  background: var(--bg-panel);
  border: 1px solid var(--divider);
  border-radius: 4px;
  color: black;
}
.file-ico {
  font-size: 30px;
}
.file-name {
  font-size: 18px;
  margin: 10px;
  max-width: 140px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.file-dl {
  font-size: 22px;
  margin: 10px;
}

/* Контекстное меню */

.confirm-popover {
  position: absolute;
  top: 100%; /* сразу под пузырём */
  left: 0;
  display: flex;
  gap: 6px;
  background: #fff;
  border: 1px solid var(--divider);
  border-radius: 6px;
  padding: 6px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  z-index: 1000;
}
.confirm-text {
  font-size: 0.85rem;
  color: black;
}
.confirm-popover button {
  padding: 4px 8px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.85rem;
  
}
.confirm-popover button:first-of-type {
  background: #D50032;
  
}
.confirm-popover button:last-of-type {
  background: var(--accent);
  color: #fff;
}
.context-menu{
  color: black;
  margin: 15px;

}
.context-menu > div {
  padding: 6px 12px;
  cursor: pointer;
  font-size: 0.85rem;
}
.context-menu > div:hover {
  background: #f5f5f5;
}
/* Шаренные сообщения */
.msg-shared {
  border: 1px solid #ddd;
  border-radius: 6px;
  padding: 8px;
  margin-bottom: 4px;
}
.shared-header {
  font-size: 13px;
  color: #555;
  margin-bottom: 4px;
}
.shared-content {
  background: #f9f9f9;
  padding: 6px;
  border-radius: 4px;
}
.shared-profile {
  display: flex;
  align-items: center;
  padding: 6px;
  background: #f9f9f9;
  border-radius: 4px;
}
.profile-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  margin-right: 8px;
}
.profile-info .profile-name {
  font-weight: 500;
}
.profile-info .profile-login {
  font-size: 13px;
  color: #777;
}
.shared-post-card{
  display:block;
  border:1px solid var(--border2);
  border-radius:10px;
  padding:8px;
  max-width:300px;
  text-decoration:none;
  color:inherit;
}
.post-card-head{
  display:flex;
  align-items:center;
  gap:8px;
  margin-bottom:6px;
}
.post-card-avatar{
  width:34px;height:34px;border-radius:50%;object-fit:cover;
}
.post-card-author{font-weight:600;}
.post-card-body{display:flex;flex-direction:column;gap:6px;}
.post-card-img{
  max-height:150px;
  width:100%;
  object-fit:cover;
  border-radius:6px;
}
.post-card-text{margin:0;font-size:14px;line-height:1.35;}
.shared-post-card{
  display:block;
  border:1px solid var(--border2);
  border-radius:10px;
  padding:8px;
  max-width:300px;
  text-decoration:none;
  color:inherit;
}
.post-card-head{
  display:flex;
  align-items:center;
  gap:8px;
  margin-bottom:6px;
}
.post-card-avatar{
  width:34px;height:34px;border-radius:50%;object-fit:cover;
}
.post-card-author{font-weight:600;}
.post-card-body{display:flex;flex-direction:column;gap:6px;}
.post-card-img{
  max-height:150px;width:100%;object-fit:cover;border-radius:6px;
}
.post-card-text{margin:0;font-size:14px;line-height:1.35;}
